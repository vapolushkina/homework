# Домашнее задание к занятию "`Очереди RabbitMQ`" - `Полушкина Виктория`


### Инструкция по выполнению домашнего задания

   1. Сделайте `fork` данного репозитория к себе в Github и переименуйте его по названию или номеру занятия, например, https://github.com/имя-вашего-репозитория/git-hw или  https://github.com/имя-вашего-репозитория/7-1-ansible-hw).
   2. Выполните клонирование данного репозитория к себе на ПК с помощью команды `git clone`.
   3. Выполните домашнее задание и заполните у себя локально этот файл README.md:
      - впишите вверху название занятия и вашу фамилию и имя
      - в каждом задании добавьте решение в требуемом виде (текст/код/скриншоты/ссылка)
      - для корректного добавления скриншотов воспользуйтесь [инструкцией "Как вставить скриншот в шаблон с решением](https://github.com/netology-code/sys-pattern-homework/blob/main/screen-instruction.md)
      - при оформлении используйте возможности языка разметки md (коротко об этом можно посмотреть в [инструкции  по MarkDown](https://github.com/netology-code/sys-pattern-homework/blob/main/md-instruction.md))
   4. После завершения работы над домашним заданием сделайте коммит (`git commit -m "comment"`) и отправьте его на Github (`git push origin`);
   5. Для проверки домашнего задания преподавателем в личном кабинете прикрепите и отправьте ссылку на решение в виде md-файла в вашем Github.
   6. Любые вопросы по выполнению заданий спрашивайте в чате учебной группы и/или в разделе “Вопросы по заданию” в личном кабинете.
   
Желаем успехов в выполнении домашнего задания!
   
### Дополнительные материалы, которые могут быть полезны для выполнения задания

1. [Руководство по оформлению Markdown файлов](https://gist.github.com/Jekins/2bf2d0638163f1294637#Code)

---

### Задание 1
Установка RabbitMQ
Используя Vagrant или VirtualBox, создайте виртуальную машину и установите RabbitMQ. Добавьте management plug-in и зайдите в веб-интерфейс.

Итогом выполнения домашнего задания будет приложенный скриншот веб-интерфейса RabbitMQ.

![image](https://github.com/vapolushkina/homework/assets/121248099/4a9e3ef8-de16-4cf4-a56b-d4811edd62ec)

---

### Задание 2
Отправка и получение сообщений
Используя приложенные скрипты, проведите тестовую отправку и получение сообщения. Для отправки сообщений необходимо запустить скрипт producer.py.

Для работы скриптов вам необходимо установить Python версии 3 и библиотеку Pika. Также в скриптах нужно указать IP-адрес машины, на которой запущен RabbitMQ, заменив localhost на нужный IP.

$ pip install pika
Зайдите в веб-интерфейс, найдите очередь под названием hello и сделайте скриншот. После чего запустите второй скрипт consumer.py и сделайте скриншот результата выполнения скрипта

В качестве решения домашнего задания приложите оба скриншота, сделанных на этапе выполнения.

Для закрепления материала можете попробовать модифицировать скрипты, чтобы поменять название очереди и отправляемое сообщение.

![image](https://github.com/vapolushkina/homework/assets/121248099/4229b6db-41cf-4089-9627-78ae36395d8f)

![image](https://github.com/vapolushkina/homework/assets/121248099/f0bac071-8a00-4ca2-b27c-d974b6595f91)

![image](https://github.com/vapolushkina/homework/assets/121248099/f9df08dc-f53b-4e07-98a7-e4b4015aa015)

![image](https://github.com/vapolushkina/homework/assets/121248099/e36a2109-6cb9-4a57-8940-7e4513af89e0)


---

### Задание 3
Подготовка HA кластера
Используя Vagrant или VirtualBox, создайте вторую виртуальную машину и установите RabbitMQ. Добавьте в файл hosts название и IP-адрес каждой машины, чтобы машины могли видеть друг друга по имени.

Пример содержимого hosts файла:

$ cat /etc/hosts
192.168.0.10 rmq01
192.168.0.11 rmq02
После этого ваши машины могут пинговаться по имени.

Затем объедините две машины в кластер и создайте политику ha-all на все очереди.

В качестве решения домашнего задания приложите скриншоты из веб-интерфейса с информацией о доступных нодах в кластере и включённой политикой.

Также приложите вывод команды с двух нод:

$ rabbitmqctl cluster_status
Для закрепления материала снова запустите скрипт producer.py и приложите скриншот выполнения команды на каждой из нод:

$ rabbitmqadmin get queue='hello'
После чего попробуйте отключить одну из нод, желательно ту, к которой подключались из скрипта, затем поправьте параметры подключения в скрипте consumer.py на вторую ноду и запустите его.

Приложите скриншот результата работы второго скрипта.

![image](https://github.com/vapolushkina/homework/assets/121248099/83f80782-d8d3-4f2f-98c4-268e31c45eaa)

![image](https://github.com/vapolushkina/homework/assets/121248099/bc0565a0-d41f-4b1b-870a-1744eb34305e)

![image](https://github.com/vapolushkina/homework/assets/121248099/f9a7ce7a-e6b2-4564-8ab6-c55a4884f113)

![image](https://github.com/vapolushkina/homework/assets/121248099/8ec95e8e-97c0-4dab-98dd-7dd7b09a11d6)

![image](https://github.com/vapolushkina/homework/assets/121248099/6dffed35-51f1-4d65-9ea0-36555efba114)

![image](https://github.com/vapolushkina/homework/assets/121248099/3db7a441-316d-4725-a369-b621c58cb082)

![image](https://github.com/vapolushkina/homework/assets/121248099/c481f3ca-6045-40c7-afbb-b0b341d04bc4)

![image](https://github.com/vapolushkina/homework/assets/121248099/12dc7990-3b81-4673-8265-1f21d32b1647)
